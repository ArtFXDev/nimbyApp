<!DOCTYPE html>

<head>
  <title>Nimby App</title>
  <style>

  </style>
  <link rel="stylesheet" href="./css/main.css">
</head>

<body>
  <div class="center">
    <h1>Nimby App <span id="marker"></span></h1>
    <p id="version"></p>
    <p id="nimbyStatus"></p>
    <p id="nimbyModStatus"></p>
    <div id="root"></div>
    <button id="btn_enable_disable"></button>
  </div>

  <script>
    const { ipcRenderer } = require('electron');
    const version = document.getElementById('version');
    const nimbyStatusElement = document.getElementById('nimbyStatus');
    const nimbyModStatusElement = document.getElementById('nimbyModStatus');
    const marker = document.getElementById('marker');

    const btnEnableDisable = document.getElementById('btn_enable_disable');

    ipcRenderer.send('app_version');
    ipcRenderer.on('app_version', (event, arg) => {
      ipcRenderer.removeAllListeners('app_version');
      version.innerText = 'Version ' + arg.version;

    });

    btnEnableDisable.addEventListener('click', (event) => {
      ipcRenderer.send('on_switch_nimby_mod');
    });

    ipcRenderer.send('get_nimby_status');
    ipcRenderer.on('nimby_status', (event, arg) => {
      console.log(arg)
      arg.nimby ? marker.className = 'dotGreen' : marker.className = 'dotRed'

      nimbyModStatusElement.innerText = `Nimby mode status :  ${arg.autoMod ? "Auto" : "Manual"}`

      btnEnableDisable.innerText = `Switch to ${!arg.autoMod ? "Auto" : "Manual"}`
    });


  </script>
</body>
<!--

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Nimby app from ArtFX"
    />
    <title>Nimby</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root"></div>
  </body>
</html>

  
-->